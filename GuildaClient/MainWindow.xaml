<Window x:Class="GuildaClient.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Guilda RPG - Cliente" Height="760" Width="1200" WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <SolidColorBrush x:Key="Bg" Color="#0D111A"/>
        <SolidColorBrush x:Key="Card" Color="#111827"/>
        <SolidColorBrush x:Key="CardAlt" Color="#0F1623"/>
        <SolidColorBrush x:Key="Accent" Color="#2D77FF"/>
        <SolidColorBrush x:Key="AccentWarn" Color="#FF8C32"/>
        <SolidColorBrush x:Key="AccentDanger" Color="#E04848"/>
        <SolidColorBrush x:Key="Border" Color="#22314A"/>
        <SolidColorBrush x:Key="TextMain" Color="#E6ECFF"/>
        <SolidColorBrush x:Key="TextSub" Color="#9FB3D9"/>

        <Style x:Key="CardBorder" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource Card}"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="BorderBrush" Value="{StaticResource Border}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Margin" Value="0 0 0 10"/>
        </Style>

        <Style x:Key="AccentButton" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource Accent}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="{StaticResource Accent}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12 6"/>
            <Setter Property="Margin" Value="6 0"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style x:Key="GhostButton" TargetType="Button" BasedOn="{StaticResource AccentButton}">
            <Setter Property="Background" Value="{StaticResource CardAlt}"/>
            <Setter Property="Foreground" Value="{StaticResource TextMain}"/>
            <Setter Property="BorderBrush" Value="{StaticResource Border}"/>
        </Style>

        <Style TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource CardAlt}"/>
            <Setter Property="Foreground" Value="{StaticResource TextMain}"/>
            <Setter Property="BorderBrush" Value="{StaticResource Border}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8 6"/>
            <Setter Property="Margin" Value="0 6"/>
        </Style>

        <Style TargetType="DataGrid">
            <Setter Property="Background" Value="{StaticResource CardAlt}"/>
            <Setter Property="Foreground" Value="{StaticResource TextMain}"/>
            <Setter Property="BorderBrush" Value="{StaticResource Border}"/>
            <Setter Property="RowBackground" Value="#121B2A"/>
            <Setter Property="AlternatingRowBackground" Value="#0F1623"/>
            <Setter Property="GridLinesVisibility" Value="None"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="Margin" Value="0 0 8 0"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#0D111A" Offset="0"/>
                <GradientStop Color="#0B1220" Offset="0.6"/>
                <GradientStop Color="#0A1828" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Style="{StaticResource CardBorder}" Grid.Row="0" Margin="10" Background="#141C2A" Padding="14">
            <DockPanel>
                <StackPanel Orientation="Vertical" DockPanel.Dock="Left">
                    <TextBlock Text="Guilda RPG" FontSize="24" FontWeight="Bold" Foreground="{StaticResource TextMain}"/>
                    <TextBlock Text="Gerencie personagens, missoes e grupos" Foreground="{StaticResource TextSub}"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <TextBlock Text="API Base" Foreground="{StaticResource TextSub}" VerticalAlignment="Center" Margin="10 0"/>
                    <TextBox x:Name="BaseUrlBox" Width="260" Text="https://localhost:7226" ToolTip="URL base da API"/>
                    <Button Content="Usar HTTP" Click="UsarHttp_Click" Style="{StaticResource GhostButton}"/>
                    <Button Content="Recarregar tudo" Click="RecarregarTudo_Click" Style="{StaticResource AccentButton}"/>
                </StackPanel>
            </DockPanel>
        </Border>

        <!-- Tabs -->
        <TabControl Grid.Row="1" Margin="10" Background="{StaticResource Card}" BorderBrush="{StaticResource Border}" Foreground="{StaticResource TextMain}">
            <!-- Personagens -->
            <TabItem Header="Personagens">
                <Grid Margin="8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="1.3*"/>
                    </Grid.ColumnDefinitions>

                    <Border Style="{StaticResource CardBorder}" Margin="0 0 10 0">
                        <DataGrid x:Name="PersonagensGrid" AutoGenerateColumns="False" SelectionMode="Single" SelectionChanged="PersonagensGrid_SelectionChanged">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="50"/>
                                <DataGridTextColumn Header="Nome" Binding="{Binding Nome}" Width="150"/>
                                <DataGridTextColumn Header="Classe" Binding="{Binding Classe}" Width="100"/>
                                <DataGridTextColumn Header="Nivel" Binding="{Binding Nivel}" Width="60"/>
                                <DataGridTextColumn Header="Vida" Binding="{Binding Vida}" Width="70"/>
                                <DataGridTextColumn Header="Mana" Binding="{Binding Mana}" Width="70"/>
                                <DataGridTextColumn Header="Moral" Binding="{Binding Moral}" Width="70"/>
                                <DataGridTextColumn Header="Patente" Binding="{Binding PatenteGuilda}" Width="100"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>

                    <Border Style="{StaticResource CardBorder}" Grid.Column="1">
                        <StackPanel>
                            <TextBlock Text="Editar personagem" FontSize="18" FontWeight="Bold" Foreground="{StaticResource TextMain}"/>
                            <TextBlock Text="Campos obrigatorios: Nome, Classe" Foreground="{StaticResource TextSub}" FontSize="12"/>

                            <TextBox x:Name="PersonagemIdBox" ToolTip="Id (para atualizar/excluir)"/>
                            <TextBox x:Name="NomeBox" ToolTip="Nome"/>
                            <TextBox x:Name="ClasseBox" ToolTip="Classe (Guerreiro, Mago...)"/>
                            <TextBox x:Name="NivelBox" ToolTip="Nivel (1-100)"/>
                            <TextBox x:Name="VidaBox" ToolTip="Vida"/>
                            <TextBox x:Name="ManaBox" ToolTip="Mana"/>
                            <TextBox x:Name="MoralBox" ToolTip="Moral (0-100)"/>
                            <TextBox x:Name="PatenteBox" ToolTip="Patente na guilda"/>

                            <StackPanel Orientation="Horizontal" Margin="0 8 0 0">
                                <Button Content="Criar" Click="CriarPersonagem_Click" Style="{StaticResource AccentButton}"/>
                                <Button Content="Atualizar" Click="AtualizarPersonagem_Click" Style="{StaticResource GhostButton}"/>
                                <Button Content="Excluir" Click="ExcluirPersonagem_Click" Style="{StaticResource GhostButton}" Background="{StaticResource AccentDanger}" BorderBrush="{StaticResource AccentDanger}"/>
                                <Button Content="Recarregar" Click="RecarregarPersonagens_Click" Style="{StaticResource GhostButton}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>
            </TabItem>

            <!-- Missoes -->
            <TabItem Header="Missoes">
                <Grid Margin="8">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="1.3*"/>
                    </Grid.ColumnDefinitions>

                    <Border Style="{StaticResource CardBorder}" Margin="0 0 10 0">
                        <DataGrid x:Name="MissoesGrid" AutoGenerateColumns="False" SelectionMode="Single" SelectionChanged="MissoesGrid_SelectionChanged">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Id" Binding="{Binding Id}" Width="50"/>
                                <DataGridTextColumn Header="Titulo" Binding="{Binding Titulo}" Width="200"/>
                                <DataGridTextColumn Header="Dificuldade" Binding="{Binding Dificuldade}" Width="90"/>
                                <DataGridTextColumn Header="Ouro" Binding="{Binding RecompensaOuro}" Width="80"/>
                                <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="100"/>
                                <DataGridTextColumn Header="Deadline" Binding="{Binding DataLimite}" Width="120"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </Border>

                    <Border Style="{StaticResource CardBorder}" Grid.Column="1">
                        <StackPanel>
                            <TextBlock Text="Editar missao" FontSize="18" FontWeight="Bold" Foreground="{StaticResource TextMain}"/>
                            <TextBlock Text="Use status: 1=Planejada, 2=EmAndamento, 3=Concluida, 4=Falha" Foreground="{StaticResource TextSub}" FontSize="12"/>

                            <TextBox x:Name="MissaoIdBox" ToolTip="Id (para atualizar/excluir)"/>
                            <TextBox x:Name="TituloBox" ToolTip="Titulo"/>
                            <TextBox x:Name="DescricaoBox" ToolTip="Descricao"/>
                            <TextBox x:Name="DificuldadeBox" ToolTip="Dificuldade (1-10)"/>
                            <TextBox x:Name="OuroBox" ToolTip="Recompensa em ouro"/>
                            <TextBox x:Name="DataLimiteBox" ToolTip="Data limite (YYYY-MM-DD ou vazio)"/>
                            <TextBox x:Name="StatusBox" ToolTip="Status"/>

                            <StackPanel Orientation="Horizontal" Margin="0 8 0 0">
                                <Button Content="Criar" Click="CriarMissao_Click" Style="{StaticResource AccentButton}"/>
                                <Button Content="Atualizar" Click="AtualizarMissao_Click" Style="{StaticResource GhostButton}"/>
                                <Button Content="Excluir" Click="ExcluirMissao_Click" Style="{StaticResource GhostButton}" Background="{StaticResource AccentDanger}" BorderBrush="{StaticResource AccentDanger}"/>
                                <Button Content="Recarregar" Click="RecarregarMissoes_Click" Style="{StaticResource GhostButton}"/>
                            </StackPanel>

                            <Separator Margin="0 10"/>
                            <TextBlock Text="Participantes" FontWeight="Bold" Foreground="{StaticResource TextMain}"/>
                            <ListBox x:Name="ParticipantesList" Height="130" Background="{StaticResource CardAlt}" Foreground="{StaticResource TextMain}" BorderBrush="{StaticResource Border}"/>

                            <StackPanel Orientation="Horizontal" Margin="0 6 0 0">
                                <TextBox x:Name="PersonagemIdParaMissaoBox" Width="120" ToolTip="PersonagemId"/>
                                <TextBox x:Name="FuncaoBox" Width="170" ToolTip="Funcao no grupo" Margin="6 0 0 0"/>
                            </StackPanel>
                            <StackPanel Orientation="Horizontal" Margin="0 6 0 0">
                                <Button Content="Atribuir personagem" Click="AtribuirPersonagem_Click" Style="{StaticResource AccentButton}"/>
                                <Button Content="Remover personagem" Click="RemoverPersonagem_Click" Style="{StaticResource GhostButton}" Background="{StaticResource AccentDanger}" BorderBrush="{StaticResource AccentDanger}"/>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </Grid>
            </TabItem>
        </TabControl>

        <TextBlock x:Name="StatusText" Grid.Row="2" Margin="16 0 0 12" Foreground="#7FB4FF" Text="Pronto"/>
    </Grid>
</Window>
